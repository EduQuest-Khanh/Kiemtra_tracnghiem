<!DOCTYPE html>
<html lang="vi">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>EduQuest: N·ªÅn t·∫£ng Kh·∫£o th√≠ T∆∞∆°ng t√°c</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>üéì</text></svg>">
  <style>
    body {
      font-family: Inter, sans-serif;
    }
  </style>
</head>

<body class="bg-gray-50">
  <div id="root"></div>

  <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
  <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js"></script>

  <script type="text/babel" data-presets="react,typescript">

    const { useState, useRef, useEffect } = React;

    // =============== ICON COMPONENTS ===============
    const FileIcon = () => (
      <svg xmlns="http://www.w3.org/2000/svg" className="h-12 w-12 text-indigo-500" fill="none" viewBox="0 0 24 24" stroke="currentColor" strokeWidth={1}>
        <path strokeLinecap="round" strokeLinejoin="round" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z" />
      </svg>
    );

    const SparklesIcon = () => (
        <svg xmlns="http://www.w3.org/2000/svg" className="h-12 w-12 text-teal-500" fill="none" viewBox="0 0 24 24" stroke="currentColor" strokeWidth={1}>
            <path strokeLinecap="round" strokeLinejoin="round" d="M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z" />
        </svg>
    );

    const ChartBarIcon = () => (
      <svg xmlns="http://www.w3.org/2000/svg" className="h-12 w-12 text-green-500" fill="none" viewBox="0 0 24 24" stroke="currentColor" strokeWidth={1}>
        <path strokeLinecap="round" strokeLinejoin="round" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z" />
      </svg>
    );
    
    const EditIcon = ({ className = "h-5 w-5 mr-2" }) => (
      <svg xmlns="http://www.w3.org/2000/svg" className={className} viewBox="0 0 20 20" fill="currentColor">
        <path d="M17.414 2.586a2 2 0 00-2.828 0L7 10.172V13h2.828l7.586-7.586a2 2 0 000-2.828z" />
        <path fillRule="evenodd" d="M2 6a2 2 0 012-2h4a1 1 0 010 2H4v10h10v-4a1 1 0 112 0v4a2 2 0 01-2 2H4a2 2 0 01-2-2V6z" clipRule="evenodd" />
      </svg>
    );

    const TrashIcon = ({ className = "h-5 w-5 mr-2" }) => (
      <svg xmlns="http://www.w3.org/2000/svg" className={className} viewBox="0 0 20 20" fill="currentColor">
        <path fillRule="evenodd" d="M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm5-1a1 1 0 00-1 1v6a1 1 0 102 0V8a1 1 0 00-1-1z" clipRule="evenodd" />
      </svg>
    );

    const ArrowLeftIcon = ({ className = "h-5 w-5 mr-2" }) => (
        <svg xmlns="http://www.w3.org/2000/svg" className={className} viewBox="0 0 20 20" fill="currentColor">
            <path fillRule="evenodd" d="M9.707 16.707a1 1 0 01-1.414 0l-6-6a1 1 0 010-1.414l6-6a1 1 0 011.414 1.414L5.414 9H17a1 1 0 110 2H5.414l4.293 4.293a1 1 0 010 1.414z" clipRule="evenodd" />
        </svg>
    );

    const SaveIcon = ({ className = "h-5 w-5 mr-2" }) => (
        <svg xmlns="http://www.w3.org/2000/svg" className={className} viewBox="0 0 20 20" fill="currentColor">
            <path d="M7.707 10.293a1 1 0 10-1.414 1.414l3 3a1 1 0 001.414 0l3-3a1 1 0 00-1.414-1.414L11 11.586V6h5a2 2 0 012 2v7a2 2 0 01-2 2H4a2 2 0 01-2-2V8a2 2 0 012-2h5v5.586l-1.293-1.293zM9 4a1 1 0 012 0v2H9V4z" />
        </svg>
    );


    // =============== LAYOUT COMPONENTS ===============
    const Header = () => (
      <header className="bg-white shadow-sm">
        <div className="max-w-7xl mx-auto py-4 px-4 sm:px-6 lg:px-8 flex justify-between items-center">
          <h1 className="text-2xl font-bold text-indigo-600">üéì EduQuest</h1>
          <p className="text-sm text-gray-500 italic">Ki·ªÉm tra Vui v·∫ª, ƒê√°nh gi√° Nghi√™m t√∫c</p>
        </div>
      </header>
    );

    const Footer = () => (
      <footer className="bg-white">
        <div className="max-w-7xl mx-auto py-4 px-4 sm:px-6 lg:px-8 text-center text-sm text-gray-400">
          <p>¬© 2025 EduQuest. All rights reserved. Phi√™n b·∫£n 3.0</p>
        </div>
      </footer>
    );

    // =============== PAGE COMPONENTS ===============
    const LandingPage = ({ onNavigate }) => (
      <div className="flex flex-col items-center justify-center text-center py-20 px-4">
        <h2 className="text-5xl font-extrabold text-gray-800 mb-4">Ch√†o m·ª´ng ƒë·∫øn v·ªõi EduQuest</h2>
        <p className="max-w-2xl text-lg text-gray-600 mb-8">
          N·ªÅn t·∫£ng t·∫°o b√†i ki·ªÉm tra tr·∫Øc nghi·ªám k·∫øt h·ª£p s·ª± h·∫•p d·∫´n c·ªßa game v√† s·ª± ch·∫∑t ch·∫Ω trong qu·∫£n l√Ω.
        </p>
        <div className="flex space-x-4">
          <button onClick={() => onNavigate('teacher')} className="bg-indigo-600 text-white font-bold py-3 px-8 rounded-lg hover:bg-indigo-700 transition duration-300">
            T√¥i l√† Gi√°o vi√™n
          </button>
          <button onClick={() => onNavigate('student')} className="bg-teal-500 text-white font-bold py-3 px-8 rounded-lg hover:bg-teal-600 transition duration-300">
            T√¥i l√† H·ªçc sinh
          </button>
        </div>

        <div className="mt-24 w-full max-w-5xl">
            <h3 className="text-3xl font-bold text-gray-800 mb-12">T√≠nh nƒÉng n·ªïi b·∫≠t</h3>
            <div className="grid grid-cols-1 md:grid-cols-3 gap-8">
                <div className="bg-white p-8 rounded-xl shadow-md flex flex-col items-center text-center">
                    <div className="bg-indigo-100 p-3 rounded-full mb-4">
                        <FileIcon />
                    </div>
                    <h4 className="text-xl font-semibold text-gray-900 mb-2">So·∫°n th·∫£o D·ªÖ d√†ng</h4>
                    <p className="text-gray-600">T·∫°o b√†i ki·ªÉm tra nhanh ch√≥ng t·ª´ file Word v√† Excel c√≥ s·∫µn.</p>
                </div>
                <div className="bg-white p-8 rounded-xl shadow-md flex flex-col items-center text-center">
                    <div className="bg-teal-100 p-3 rounded-full mb-4">
                        <SparklesIcon />
                    </div>
                    <h4 className="text-xl font-semibold text-gray-900 mb-2">Tr·∫£i nghi·ªám H·∫•p d·∫´n</h4>
                    <p className="text-gray-600">Giao di·ªán l√†m b√†i th√∫ v·ªã, gi·∫£m cƒÉng th·∫≥ng cho h·ªçc sinh.</p>
                </div>
                <div className="bg-white p-8 rounded-xl shadow-md flex flex-col items-center text-center">
                    <div className="bg-green-100 p-3 rounded-full mb-4">
                        <ChartBarIcon />
                    </div>
                    <h4 className="text-xl font-semibold text-gray-900 mb-2">B√°o c√°o Tr·ª±c quan</h4>
                    <p className="text-gray-600">Theo d√µi k·∫øt qu·∫£ theo th·ªùi gian th·ª±c v√† xu·∫•t b√°o c√°o chi ti·∫øt.</p>
                </div>
            </div>
        </div>
      </div>
    );

    const TeacherDashboard = ({ 
        onNavigate,
        studentList, setStudentList,
        studentFileName, setStudentFileName,
        questions, setQuestions 
    }) => {
      const fileInputRef = useRef(null);

      const handleFileChange = (event) => {
        const file = event.target.files[0];
        if (file) {
          const reader = new FileReader();
          reader.onload = (e) => {
            const data = new Uint8Array(e.target.result);
            const workbook = XLSX.read(data, { type: 'array' });
            const sheetName = workbook.SheetNames[0];
            const worksheet = workbook.Sheets[sheetName];
            const json = XLSX.utils.sheet_to_json(worksheet, { header: 1 });
            
            // B·ªè qua h√†ng ti√™u ƒë·ªÅ (h√†ng ƒë·∫ßu ti√™n)
            const students = json.slice(1).map(row => ({
              stt: row[0],
              hoTen: row[1],
              lop: row[2]
            }));

            setStudentList(students);
            setStudentFileName(file.name);
          };
          reader.readAsArrayBuffer(file);
        }
      };
      
      const handleClearStudents = () => {
        if (window.confirm('B·∫°n c√≥ ch·∫Øc ch·∫Øn mu·ªën x√≥a to√†n b·ªô danh s√°ch h·ªçc sinh kh√¥ng?')) {
            setStudentList([]);
            setStudentFileName('');
        }
      };

      const handleClearQuestions = () => {
         if (window.confirm('B·∫°n c√≥ ch·∫Øc ch·∫Øn mu·ªën x√≥a to√†n b·ªô c√¢u h·ªèi kh√¥ng?')) {
            setQuestions([]);
        }
      }

      const handleAnswerChange = (questionIndex, newAnswer) => {
        const updatedQuestions = [...questions];
        updatedQuestions[questionIndex].correctAnswer = newAnswer;
        setQuestions(updatedQuestions);
      }

      const handleSaveChanges = () => {
        alert('T·∫•t c·∫£ c√°c thay ƒë·ªïi ƒë√£ ƒë∆∞·ª£c l∆∞u (gi·∫£ l·∫≠p).');
      }

      return (
        <div className="max-w-7xl mx-auto py-10 px-4 sm:px-6 lg:px-8">
            <button 
                onClick={() => onNavigate('landing')}
                className="flex items-center mb-6 text-sm font-medium text-indigo-600 hover:text-indigo-800"
            >
                <ArrowLeftIcon className="h-4 w-4 mr-1" />
                Quay l·∫°i Trang ch·ªß
            </button>
            <h2 className="text-3xl font-bold text-gray-900 mb-8">B·∫£ng ƒëi·ªÅu khi·ªÉn c·ªßa Gi√°o vi√™n</h2>
          
            <div className="grid grid-cols-1 lg:grid-cols-3 gap-8">
                {/* C·ªôt 1: Chu·∫©n b·ªã v√† C√†i ƒë·∫∑t */}
                <div className="lg:col-span-1 bg-white p-6 rounded-lg shadow-md">
                    <h3 className="text-xl font-semibold text-gray-800 border-b pb-3 mb-4">1. Chu·∫©n b·ªã & C√†i ƒë·∫∑t</h3>
                    
                    {/* T·∫£i danh s√°ch l·ªõp */}
                    <div className="mb-6">
                        <h4 className="font-medium text-gray-700 mb-2">T·∫£i l√™n Danh s√°ch L·ªõp (Excel)</h4>
                        <input
                            type="file"
                            accept=".xlsx"
                            ref={fileInputRef}
                            onChange={handleFileChange}
                            className="hidden"
                            id="file-upload"
                        />
                         <label
                            htmlFor="file-upload"
                            className={`w-full flex items-center justify-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white cursor-pointer transition-colors duration-200 ${studentFileName ? 'bg-green-600 hover:bg-green-700' : 'bg-indigo-600 hover:bg-indigo-700'}`}
                        >
                            <EditIcon />
                            {studentFileName ? 'Thay ƒë·ªïi file' : 'Ch·ªçn file .xlsx'}
                        </label>
                        {studentFileName && (
                            <p className="text-sm text-green-700 mt-2">
                                ƒê√£ t·∫£i l√™n: <strong>{studentFileName}</strong> ({studentList.length} h·ªçc sinh)
                            </p>
                        )}
                    </div>
                    <div className="mb-6">
                        <h4 className="font-medium text-gray-700 mb-2">T·∫£i l√™n B·ªô c√¢u h·ªèi (Word)</h4>
                         <label
                            className="w-full flex items-center justify-center px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 cursor-not-allowed"
                        >
                            <EditIcon />
                            Ch·ªçn file .docx (s·∫Øp c√≥)
                        </label>
                    </div>

                    <div className="mt-8 border-t pt-6">
                         <button
                            onClick={handleSaveChanges}
                            className="w-full flex items-center justify-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-teal-600 hover:bg-teal-700"
                        >
                            <SaveIcon />
                            L∆∞u t·∫•t c·∫£ thay ƒë·ªïi
                        </button>
                    </div>

                </div>

                {/* C·ªôt 2: D·ªØ li·ªáu ƒë√£ t·∫£i */}
                <div className="lg:col-span-2 bg-white p-6 rounded-lg shadow-md">
                    <h3 className="text-xl font-semibold text-gray-800 border-b pb-3 mb-4">2. D·ªØ li·ªáu & Qu·∫£n l√Ω</h3>
                    
                    {/* Qu·∫£n l√Ω danh s√°ch h·ªçc sinh */}
                    <div className="mb-8">
                        <div className="flex justify-between items-center mb-3">
                            <h4 className="font-medium text-gray-700">Danh s√°ch H·ªçc sinh</h4>
                            {studentList.length > 0 && (
                                <button onClick={handleClearStudents} className="flex items-center text-sm font-medium text-red-600 hover:text-red-800">
                                    <TrashIcon className="h-4 w-4 mr-1" /> X√≥a Danh s√°ch
                                </button>
                            )}
                        </div>
                        <div className="max-h-60 overflow-y-auto border rounded-md">
                            {studentList.length > 0 ? (
                                <table className="min-w-full divide-y divide-gray-200">
                                    <thead className="bg-gray-50">
                                        <tr>
                                            <th className="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">STT</th>
                                            <th className="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">H·ªç v√† t√™n</th>
                                            <th className="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">L·ªõp</th>
                                        </tr>
                                    </thead>
                                    <tbody className="bg-white divide-y divide-gray-200">
                                       {studentList.map(student => (
                                         <tr key={student.stt}>
                                             <td className="px-6 py-4 whitespace-nowrap text-sm text-gray-500">{student.stt}</td>
                                             <td className="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900">{student.hoTen}</td>
                                             <td className="px-6 py-4 whitespace-nowrap text-sm text-gray-500">{student.lop}</td>
                                         </tr>
                                       ))}
                                    </tbody>
                                </table>
                            ) : (
                                <p className="text-center text-gray-500 p-8">Ch∆∞a c√≥ d·ªØ li·ªáu h·ªçc sinh. Vui l√≤ng t·∫£i l√™n file Excel.</p>
                            )}
                        </div>
                    </div>

                     {/* Qu·∫£n l√Ω c√¢u h·ªèi */}
                    <div>
                        <div className="flex justify-between items-center mb-3">
                            <h4 className="font-medium text-gray-700">Danh s√°ch C√¢u h·ªèi</h4>
                             {questions.length > 0 && (
                                <button onClick={handleClearQuestions} className="flex items-center text-sm font-medium text-red-600 hover:text-red-800">
                                    <TrashIcon className="h-4 w-4 mr-1" /> X√≥a To√†n b·ªô C√¢u h·ªèi
                                </button>
                            )}
                        </div>
                        <div className="max-h-96 overflow-y-auto border rounded-md p-4 space-y-6">
                            {questions.length > 0 ? (
                                questions.map((q, index) => (
                                    <div key={q.id} className="border-b pb-4">
                                        <p className="font-semibold text-gray-800 mb-2">C√¢u {index + 1}: {q.question}</p>
                                        <div className="space-y-1">
                                            {q.options.map(option => (
                                                <div key={option.key} className="flex items-center">
                                                    <input 
                                                        id={`q${q.id}-${option.key}`}
                                                        name={`question-${q.id}`}
                                                        type="radio"
                                                        checked={q.correctAnswer === option.key}
                                                        onChange={() => handleAnswerChange(index, option.key)}
                                                        className="h-4 w-4 text-indigo-600 border-gray-300 focus:ring-indigo-500"
                                                    />
                                                    <label htmlFor={`q${q.id}-${option.key}`} className="ml-3 block text-sm text-gray-700">
                                                        <span className="font-medium">{option.key}.</span> {option.value}
                                                    </label>
                                                </div>
                                            ))}
                                        </div>
                                    </div>
                                ))
                            ) : (
                                <p className="text-center text-gray-500 p-8">Ch∆∞a c√≥ d·ªØ li·ªáu c√¢u h·ªèi.</p>
                            )}
                        </div>
                    </div>
                </div>
            </div>
        </div>
      );
    };

    const StudentFlow = ({ onNavigate }) => {
      // Giao di·ªán tƒ©nh cho lu·ªìng h·ªçc sinh
      return (
        <div className="max-w-4xl mx-auto py-10 px-4 sm:px-6 lg:px-8">
            <button 
                onClick={() => onNavigate('landing')}
                className="flex items-center mb-6 text-sm font-medium text-teal-600 hover:text-teal-800"
            >
                <ArrowLeftIcon className="h-4 w-4 mr-1" />
                Quay l·∫°i Trang ch·ªß
            </button>
            <div className="bg-white p-8 rounded-lg shadow-md">
                <div className="text-center">
                    <h2 className="text-2xl font-bold text-gray-900">X√°c th·ª±c th√¥ng tin</h2>
                    <p className="text-gray-600 mt-2">Vui l√≤ng ch·ªçn l·ªõp v√† t√™n c·ªßa b·∫°n ƒë·ªÉ b·∫Øt ƒë·∫ßu.</p>
                </div>

                <div className="mt-8 space-y-6">
                    <div>
                        <label htmlFor="class" className="block text-sm font-medium text-gray-700">L·ªõp</label>
                        <select id="class" name="class" className="mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-teal-500 focus:border-teal-500 sm:text-sm rounded-md">
                            <option>-- Ch·ªçn l·ªõp --</option>
                            <option>6A</option>
                            <option>7B</option>
                            <option>8C</option>
                        </select>
                    </div>
                    <div>
                        <label htmlFor="student-name" className="block text-sm font-medium text-gray-700">H·ªç v√† t√™n</label>
                        <select id="student-name" name="student-name" className="mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-teal-500 focus:border-teal-500 sm:text-sm rounded-md">
                            <option>-- Ch·ªçn t√™n c·ªßa b·∫°n --</option>
                            <option>Nguy·ªÖn VƒÉn A</option>
                            <option>Tr·∫ßn Th·ªã B</option>
                        </select>
                    </div>
                    <button className="w-full bg-teal-500 text-white font-bold py-3 px-8 rounded-lg hover:bg-teal-600 transition duration-300">
                        B·∫Øt ƒë·∫ßu l√†m b√†i
                    </button>
                </div>
            </div>
        </div>
      )
    };
    
    // =============== MAIN APP COMPONENT ===============
    const App = () => {
      const [currentPage, setCurrentPage] = useState('landing');
      
      // State ƒë∆∞·ª£c n√¢ng l√™n c·∫•p App
      const [studentList, setStudentList] = useState([]);
      const [studentFileName, setStudentFileName] = useState('');
      const [questions, setQuestions] = useState([
        { id: 1, question: 'Th·ªß ƒë√¥ c·ªßa Vi·ªát Nam l√† g√¨?', options: [{key: 'A', value: 'H√† N·ªôi'}, {key: 'B', value: 'ƒê√† N·∫µng'}, {key: 'C', value: 'TP. HCM'}, {key: 'D', value: 'H·∫£i Ph√≤ng'}], correctAnswer: 'A' },
        { id: 2, question: '1 + 1 = ?', options: [{key: 'A', value: '1'}, {key: 'B', value: '2'}, {key: 'C', value: '3'}, {key: 'D', value: '4'}], correctAnswer: 'B' },
        { id: 3, question: 'H√†nh tinh n√†o g·∫ßn M·∫∑t tr·ªùi nh·∫•t?', options: [{key: 'A', value: 'Tr√°i ƒê·∫•t'}, {key: 'B', value: 'Sao H·ªèa'}, {key: 'C', value: 'Sao Th·ªßy'}, {key: 'D', value: 'Sao Kim'}], correctAnswer: 'C' },
      ]);

      const renderPage = () => {
        switch (currentPage) {
          case 'teacher':
            return <TeacherDashboard 
                        onNavigate={setCurrentPage}
                        studentList={studentList}
                        setStudentList={setStudentList}
                        studentFileName={studentFileName}
                        setStudentFileName={setStudentFileName}
                        questions={questions}
                        setQuestions={setQuestions}
                    />;
          case 'student':
            return <StudentFlow onNavigate={setCurrentPage} />;
          default:
            return <LandingPage onNavigate={setCurrentPage} />;
        }
      };

      return (
        <div className="min-h-screen flex flex-col">
          <Header />
          <main className="flex-grow">
            {renderPage()}
          </main>
          <Footer />
        </div>
      );
    };

    const container = document.getElementById('root');
    const root = ReactDOM.createRoot(container);
    root.render(<App />);

  </script>

</body>

</html>
